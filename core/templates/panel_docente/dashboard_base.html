{% extends "base.html" %}
{% load static %}


{% block content %}

<div class="dashboard-layout">

  <!-- SIDEBAR IZQUIERDO -->
  <aside class="dashboard-sidebar">
    <div class="logo-container mb-3">
      <img src="{% static 'img/logo1.svg' %}" alt="Logo" class="logo">
    </div>
    <hr class="sidebar-divider">
    <div class="sidebar-menu mt-4">

      <a href="{% url 'panel_docente_bienvenida' %}" class="menu-link">
        <i class="bi bi-house-door"></i> <span>Inicio</span>
      </a>
      <a href="{% url 'docente_educacion' %}" class="menu-link">
        <i class="bi bi-mortarboard"></i> <span>Educación</span>
      </a>
      <a href="{% url 'docente_capacitacion' %}" class="menu-link">
        <i class="bi bi-lightbulb"></i> <span>Capacitación Complementaria</span>
      </a>
      <a href="{% url 'docente_idiomas' %}" class="menu-link">
        <i class="bi bi-translate"></i> <span>Idiomas</span>
      </a>
      <a href="{% url 'docente_experiencia' %}" class="menu-link">
        <i class="bi bi-briefcase"></i> <span>Experiencia Laboral</span>
      </a>
    </div>
  </aside>

  <!-- CONTENIDO CENTRAL -->
  <main class="dashboard-content">
    {% block panel_content %}{% endblock %}
  </main>


<!-- =========================
     PANEL DERECHO
     ========================= -->
<aside class="dashboard-right" id="right-panel">
  <!-- Usuario -->
  {% if user.is_authenticated %}
  <div class="dropdown user-dropdown mb-4">
    <button class="btn-user dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
      {% if user.perfil.foto %}
        <img src="{{ user.perfil.foto.url }}" class="user-avatar">
      {% else %}
        <img src="{% static 'img/default_avatar.png' %}" class="user-avatar">
      {% endif %}
      <div class="user-info">
        <span class="fw-semibold" style="color:#2e9b59;">Docente {{ user.perfil.primer_nombre }} {{ user.perfil.apellido }}</span>
        
      </div>
    </button>
    <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="{% url 'perfil_usuario' %}">Perfil</a></li>
      <li><a class="dropdown-item" href="{% url 'editar_perfil' %}">Editar Perfil</a></li>
      <li><hr class="dropdown-divider"></li>
      <li>
        <a class="dropdown-item text-danger" href="{% url 'logout' %}">Cerrar sesión</a>
      </li>
    </ul>
  </div>
  {% endif %}

  <!-- Calendario -->

    <div id="calendarHeader" class="calendar-header d-flex align-items-center justify-content-between mb-2">
      <button id="prevMonth" class="btn btn-sm btn-outline-secondary rounded-circle px-2">&lt;</button>
      <div id="calendarTitle" class="calendar-title fw-semibold text-success"></div>
      <button id="nextMonth" class="btn btn-sm btn-outline-secondary rounded-circle px-2">&gt;</button>
    </div>
    <div id="calendar" class="calendar-grid"></div>


  <!-- Notas rápidas (UI requerida por right_panel.js) -->
  <div class="notes-section">
    <h6 class="mb-3 fw-semibold" style="color:#0044ff;">Notas rápidas</h6>

    <input id="noteTitle" class="form-control mb-2" placeholder="Título (opcional)">
    <textarea id="notes" class="form-control mb-2" rows="3" placeholder="Escribe tu nota..."></textarea>
    <button id="saveNotes" class="btn btn-sm btn-success w-100 mb-3" type="button">Guardar</button>

    <ul id="notesList" class="list-group">
      <!-- right_panel.js renderiza las <li> aquí -->
    </ul>
  </div>

  <!-- Modal para ver nota completa (un único modal en la página) -->
  <div class="modal fade" id="noteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="noteModalTitle" class="modal-title">Nota</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <small class="text-muted d-block mb-2" id="noteModalDate"></small>
          <p id="noteModalContent" class="mb-0"></p>

          <div class="d-flex justify-content-end mt-3">
            <button id="deleteNoteBtn" class="btn btn-sm btn-danger" type="button" data-note-id="">Eliminar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</aside>

</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
